## 프로세스

![[스크린샷_2025-04-11_23.55.09.png]]

프로세스는 작업을 하기위한 공간을 의미함

정확히는! **“운영체제로 부터 자원을 할당받은 작업의 단위”**

  

프로세스는 각 독립된 메모리 영역을 할당받는다.

기본적으로 최소 1개의 스레드를 가지고 있다 (main thread)

  

프로세스 간 통신은 **IPC** 라는 방식을 이용한다

[https://dar0m.tistory.com/233](https://dar0m.tistory.com/233)

## 스레드

![[스크린샷_2025-04-12_00.00.26.png]]

스레드는 실질적으로 작업을 실행하는 단위

정확히는! **“프로세스가 할당받은 자원을 이용하는 실행 흐름의 단위”**

  

스레드는 프로세스 내에서 각 Stack만 따로 할당받고 Code, Data, Heap영역은 공유함

## 싱글스레드

- 하나의 프로세스에서 하나의 스레드 실행
- 하나의 레지스터와 스택으로 표현
- 요청에 대한 빠른 반응을 요구하는 네트워크 서버의 프로그램일 경우 단일 스레드 모델이 더 적합

### 장점

1. 자원 접근에 대한 동기화를 신경쓰지 않아도 된다.
    
    여러 개의 스레드가 공유된 자원을 사용할 경우 각 스레드가 원하는 결과를 얻게 하려면
    
    공용 자원에 대한 접근이 통제되어야 하며 이 작업은 프로그래머에게 많은 노력을 요구하고 비용을 발생시킨다. 단일 스레드 모델에서는 이러한 작업이 필요하지 않다.
    
2. 문맥 교환(context switch) 작업을 요구하지 않는다

> context switching란?
> 
> 현재 진행하고 있는 Task(Process, Thread)의 상태를 저장하고 다음 진행할 Task의 상태 값을 읽어 적용하는 과정을 말합니다.

### 단점

1. 한 번에 하나의 일밖에 처리할 수 없기때문에 작업에서 블로킹이 발생하면 다음 일을 처리하기 까지 기다려야 하는 문제가 발생

  

## 멀티스레드

- 프로그램을 다수의 실행 단위로 나누어 실행
- 프로세스 내에서 자원을 공유하여 자원생성과 관리의 중복을 최소화
- 서버가 많은 요청을 효율적으로 수행할 수 있는 환경을 제공
- 각각의 스레드가 고유의 레지스터와 스택으로 표현됨
- 다양한 요인들이 결합된 데이터에 대한 통계적 분석 연산의 경우는 멀티 스레드 모델이 더 적합하다.
- 필요한 구간에 여러 개의 스레드를 배치해 시스템 자원을 최대한 활용하여 빠르게 연산을 완료하도록 설계할 수 있다.

> [!important]
> 
> > 표현
> 
> “멀티스레딩은 하나의 프로세스 내에서 여러 스레드를 생성해 동시에 실행 가능한 구조를 만들어주는 기법이며, OS 스케줄러 또는 하드웨어 지원에 따라 병렬 또는 동시적으로 실행됩니다.”

### 장점

1. **응답성**
    1. 프로그램의 일부분(스레드)이 중단되거나 긴 작업을 수행하더라도 프로그램의 수행이 계속 되어 사용자에 대한 응답성이 증가한다.
    2. ex) 멀티 스레드가 적용된 웹 브라우저 프로그램에서 하나의 스레드가 이미지 파일을 로드하고 있는 동안, 다른 스레드에서 사용자와 상호작용 가능
2. **경제성**
    1. 프로세스 내 자원들과 메모리를 공유하기 때문에 메모리 공간과 시스템 자원 소모가 줄어든다.
    2. 스레드 간 통신이 필요한 경우에도 쉽게 데이터를 주고 받을 수 있으며, **스레드 간의 context switching은 캐시 메모리를 비울 필요가 없기 때문에 더 빠르다**.
3. **멀티프로세서 활용**
    1. 다중 CPU 구조에서는 각각의 스레드가 다른 프로세서에서 병렬로 수행될 수 있으므로 병렬성이 증가한다.
4. 스레드는 프로세스 내의 Stack 영역을 제외한 모든 메모리를 공유하기 때문에 통신의 부담이 적어서 응답 시간이 빠르다.

### 단점

1. **임계 영역(Critical Section)?** 
    1. 둘 이상의 스레드가 동시에 실행하면 문제를 일으키는 코드 블록.  
          
        공유하는 자원에 동시에 접근하는 경우, 프로세스와는 달리 스레드는 데이터와 힙 영역을 공유하기 때문에 어떤 스레드가 다른 스레드에서 사용 중인 변수나 자료구조에 접근하여 엉뚱한 값을 읽어오거나 수정할 수 있다.  
          
        따라서 **동기화**가 필요!
2. 동기화를 통해 스레드의 작업 처리 순서와 공유 자원에 대한 접근을 컨트롤할 수 있다.  
      
    그러나 불필요한 부분까지 동기화를 하는 경우, 과도한 lock으로 인해 병목 현상을 발생시켜 성능이 저하될 가능성이 높기 때문에 주의해야 한다.

  

# iOS의 GCD

- 멀티코어 환경에서 효율적인 동시성 처리를 지원하는 프레임워크입니다.
- 개발자는 직접 스레드를 생성하거나 관리하지 않고도, 작업을 큐에 추가함으로써 GCD가 적절한 스레드에 작업을 분배하여 실행합니다.

  

## **GCD의 주요 구성 요소**

- **Dispatch Queue**: 작업을 순차적으로 실행하는 Serial Queue와 동시에 실행하는 Concurrent Queue로 나뉘며, 작업의 특성에 따라 선택하여 사용할 수 있습니다.
    - 메인은 직렬 큐
    - 글로벌은 동시 큐
- **Dispatch Group**: 여러 작업을 그룹으로 묶어, 모든 작업이 완료된 후 특정 작업을 실행할 수 있도록 합니다.
- **Dispatch Semaphore**: 동시에 실행될 수 있는 작업의 수를 제한하여, 자원에 대한 접근을 제어합니다.

  

  

  

[https://innovation123.tistory.com/227](https://innovation123.tistory.com/227)

[https://codingarchive.tistory.com/28](https://codingarchive.tistory.com/28)