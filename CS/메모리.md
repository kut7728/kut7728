# 메모리 구조

![[images_alicesykim95_post_97706160-03d5-4877-8d6d-abceec9d91a8_자바_설명17.jpg]]

|   |   |   |   |   |
|---|---|---|---|---|
|**구성 요소**|**위치**|**속도**|**용량**|**설명**|
|**레지스터**|CPU 내부|🟢 매우 빠름|🔴 매우 작음 (수십 개)|CPU가 직접 연산 시 사용하는 임시 저장소|
|**캐시 메모리 (L1~L3)**|CPU 내부 또는 근처|🟢 빠름|🟡 중간|자주 사용하는 데이터/명령어 임시 저장|
|**RAM (Main Memory)**|메인보드|🟡 느림|🟢 큼 (GB 단위)|실행 중인 프로그램과 데이터를 저장|
|**저장장치 (SSD/HDD)**|외부 장치|🔴 매우 느림|🟢 매우 큼|프로그램과 데이터를 영구 저장|

**요점**: 속도는 레지스터 > 캐시 > RAM > SSD 순이며, 용량은 그 반대입니다.

  

  

# 캐시

- SRAM - 주소가 키로 주어지면 해당 공간에 즉시 접근 가능
    - 마치 하드웨어 해시테이블?
    - TLB

## **1️⃣ L1 / L2 / L3 캐시 구조 및 역할**

|   |   |   |   |   |   |
|---|---|---|---|---|---|
|**구분**|**위치**|**속도**|**크기**|**공유 여부**|**역할**|
|**L1 캐시**|CPU 코어 내부|🟢 가장 빠름|🔴 가장 작음 (KB 단위)|코어 전용|명령어, 데이터 분리 저장 (Harvard 구조)|
|**L2 캐시**|코어 내부 or 바로 근처|🟢 빠름|🟡 중간 (수백 KB~MB)|보통 코어 전용|L1 캐시 미스를 보완|
|**L3 캐시**|CPU 전체 공유|🟡 느림|🟢 큼 (수 MB)|여러 코어 공유|캐시 간 일관성 유지, 데이터 공유 최적화|

**면접 팁**: “캐시 계층 구조는 메모리 접근 지연(latency)을 줄이고, CPU가 유휴 상태로 대기하지 않도록 설계된 구조입니다.”

  

## **2️⃣ 지역성 원리 (Locality of Reference)**

> [!important] 캐시가 효율적으로 동작하려면, 캐시에 저장할 데이터가 지역성을 가져야 한다.
> 
> 지역성이란 **데이터 접근이 시간적, 혹은 공간적으로 가깝게 일어나는 것을 의미**한다.

- **시간 지역성(Temporal Locality)**: 최근에 접근한 데이터는 다시 접근될 가능성이 높다
    
    → 예: 반복문에서 같은 변수 접근
    
- **공간 지역성(Spatial Locality)**: 인접한 주소의 데이터도 함께 접근될 가능성이 높다
    
    → 예: 배열 순회
    

  

## **3️⃣ 캐시 미스와 종류**

> [!important] CPU가 요청한 데이터가 캐시에 있으면 `**Cache Hit**`라고 하며, 반대로 없어서 주기억장치에서 가져오게되면 `**Cache Miss**`라고 한다. 그리고 이 캐쉬 미스에는 3가지 종류가 있다.

|   |   |   |
|---|---|---|
|**종류**|**원인**|**예시**|
|**Cold Miss (Compulsory Miss)**|처음 접근하는 데이터|프로그램 시작 직후|
|**Capacity Miss**|캐시 크기보다 데이터가 많아서 밀려남|큰 배열 전체 접근 시|
|**Conflict Miss**|서로 다른 주소가 같은 캐시 블록에 매핑됨|캐시 매핑 방식에 따라 발생|

**면접 팁**: “Conflict miss는 Direct Mapped Cache에서 자주 발생하며, 이를 줄이기 위해 Set-Associative Cache가 사용됩니다.”

  

# 메모리

![[images_alicesykim95_post_afe9667a-41e4-4d6d-9731-a12b7c8e6280_자바_설명18.jpg]]

  

## 메모리 구조

### 1️⃣ 코드 영역

- 실행할 프로그램의 코드가 저장되는 영역
- 텍스트 영역이라고도 부름
- CPU가 저장된 명령어를 하나씩 가져가서 처리함

  

### 2️⃣ 데이터 영역

- 프로그램의 시작과 동시에 할당됨, 종료시에 소멸함
- 전역변수, 정적변수, 배열, 구조체 등이 저장됨

> [!important] **BBS(Blocked Stated Symbol)**
> 
> - 초기화된 데이터는 데이터영역에, 나머지는 BBS에 저장됨
> - 초기화 되지 않은 전역변수 → 정적변수

  

### 3️⃣ 힙 영역

- 사용자가 직접 관리 할 수 있는 메모리 영역
- 메모리 주소값에 의해서만 참조되고 사용됨
- 참조타입에 대한 저장 공간 → Class

  

### 4️⃣ 스택 영역

- 함수의 호출과 관계되는 지역변수, 매개변수, 메소드, 리턴값 등이 저장되는 영역
- 프로그램이 자동으로 사용하는 임시 메모리 영역
- 함수의 호출과 함께 할당, 완료시 소멸
- 스택 영역에 저장되는 함수의 호출 정보를 `스택 프레임`이라고 함
- 푸시 동작으로 데이터 저장, 팝 동작으로 데이터 인출

  

> [!important]
> 
> ### 스택 vs 힙
> 
> **힙과 스택은 사실 같은 공간을 공유하지만 시작지점이 다르다!**
> 
> ---
> 
> - Heap : 힙은 메모리 위쪽주소 부터 할당한다
> - Stack : 스택은 메모리 아래쪽 주소 부터 할당한다
> - 스택/힙 오버플로우 : 서로 다른 시작점에서 할당되다가 서로 겹치는 상황